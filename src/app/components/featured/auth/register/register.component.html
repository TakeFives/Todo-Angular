<app-modal *ngIf="modalService.isVisible$ | async" [title]="'Register'">

<div class="register-box">
  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">

    <div class="error" *ngIf="errorService.error$ | async as error">{{error}}. Try again.</div>
    <div class="error" *ngIf="passwordMatchError">Passwords do not match. Try again.</div>

    <div class="form-group">
      <label for="username">Username</label>
      <input type="text" formControlName="username" />
      <div class="validation" *ngIf="registerForm.get('username')?.invalid && registerForm.get('username')?.touched">
        <span *ngIf="registerForm.get('username')?.errors?.['required']">Name field can not be empty</span>
        <span *ngIf="registerForm.get('username')?.errors?.['minlength']"> Please enter min 3 symbols length name. Only
          {{(registerForm.get('username')?.errors?.['minlength']?.['requiredLength']) - (registerForm.get('username')?.errors?.['minlength']?.['actualLength'])}} symbols left.
        </span>
      </div>
    </div>
    <div class="form-group">
      <label for="password">Password</label>
      <input type="password" formControlName="password" />
      <div class="validation" *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
        <span *ngIf="registerForm.get('password')?.errors?.['required']">Name field can not be empty</span>
        <span *ngIf="registerForm.get('password')?.errors?.['minlength']"> Please enter min 5 symbols length name. Only
          {{(registerForm.get('password')?.errors?.['minlength']?.['requiredLength']) - (registerForm.get('password')?.errors?.['minlength']?.['actualLength'])}} symbols left.
        </span>
      </div>
    </div>
    <div class="form-group">
      <label for="confirm-password">Confirm password</label>
      <input type="password" formControlName="confirmPassword" [ngStyle]="passwordMatchError ? {'border-color': 'red'} : null " />
      <div class="validation" *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
        <span *ngIf="registerForm.get('password')?.errors?.['required']">Name field can not be empty</span>
        <span *ngIf="registerForm.get('password')?.errors?.['minlength']"> Please enter min 5 symbols length name. Only
          {{(registerForm.get('password')?.errors?.['minlength']?.['requiredLength']) - (registerForm.get('password')?.errors?.['minlength']?.['actualLength'])}} symbols left.
        </span>
      </div>
    </div>
    <div class="form-group submit-nav">
      <button [disabled]="registerForm.invalid || submitted " class="button button-submit">Register</button>
      <span>or</span>
      <a routerLink="/auth">Log in</a>

    </div>
  </form>
  
</div>

</app-modal>

